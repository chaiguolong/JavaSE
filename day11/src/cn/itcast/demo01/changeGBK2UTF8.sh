#!/bin/bash

function gbk2utf(){
    file="$1"
    echo "濠电姷鏁告慨鐑藉极閸涘﹥鍙忛柣鎴ｆ閺嬩線鏌涘☉姗堟敾闁告瑥绻橀弻锝夊箣閿濆棭妫勯梺鍝勵儎缁舵岸寮诲☉妯锋婵鐗婇弫楣冩⒑閸涘﹦鎳冪紒缁樺姍濠渚姊虹粙璺ㄧ闁告艾顑囩槐鐐哄箣閿旂晫鍘遍梺闈浨归崕閬嶅锤濡ら拑鐔兼煥濠靛棭妲哥紒鐘哄吹鐟欏嫭绀婵炲眰鍊濆畷顐⒚洪鍛嫼闂佸憡绻傜氱兘宕曢幇鐗堢厽婵°倓绶″▓姗鏌熼獮鍨仼闁宠棄顦垫慨闁绘ɑ顔栭崥鍛存⒒娴ｈ櫣甯涢柛鏃鐗犻、娆撳冀椤撶偞杈堥梺璺ㄥ枔婵敻鍩涢幋锔界厱婵炴垶锕銉╂煟韫囧鍔ょ紒杈ㄦ尭椤撳ジ宕崘銊ょ矗闂備椒绱徊鍧楀礂濮楅悰顔芥償閵婏箑娈熼梺闈涱檧闂勫嫰鎮甸崘娴嬫斀闁绘﹩鍠栭悘杈ㄧ箾婢跺娲撮柟宕囧枛椤㈡稑饪伴崨顖滃姼闂備焦瀵уú鏍磹瑜版帒鐓曢柟杈鹃檮閻撴洘绻涢幋鐑囧叕鐎规悶鍎遍埞鎴︻敋婵﹥妞藉畷顐﹀礋椤掑▍銈囩磽娴ｇ瓔鍤欓悗姘煎墴椤㈡岸鏁愰崼顐ｂ枌婵犳鍠栭敃锔惧垝椤栫偛绠柛娑卞灡閸犲棝鏌涢弴銊ヤ簵闁告繃顨婂缁樻媴閸涢潧婀卞☉鎺撴珖闁告帗甯￠獮妯虹暦閸ャ劍顔曢梻浣虹帛濮婂宕㈣瀹曞綊宕掑☉鏍︾盎闂侀涘嵆濞佳勭濠靛鐓ユ繛鎴烆焽婢э附鎱ㄦ繝鍌ょ吋鐎规洘甯掗～婵嬵敆娴ｇ懓鎰娲橀崝娆撳箖濠婂牊鍤嶉柕澶堝劚濞硷繝寮婚妸鈺佸嵆闁绘劖褰冮幗婊呭垝婵犳艾鍐妞ゆ挾鍠撻崢鍗烆渻閵堝棗濮х紒鎻掑⒔缁牏绱撴担鍝勪壕闁稿孩濞婇幃妯衡攽鐎ｎ亞鍘撮梺纭呮彧闂勫嫰宕戦幇顔款潐濞叉牕霉閸岀偛姹查柨鐔哄У閳锋垿鏌熼幆鏉啃撻柡浣介哺娣囧﹪顢曢姀鐘虫閻庢鍠涢褔鍩ユ径鎰潊闁绘ɑ褰冪粊顕姊绘笟濞佳勭仚闂佺ǹ姘﹀▍鏇犻潧銈稿畷鍫曨敆娴ｅ弶瀚 '$file' ..."
    iconv -f gb18030 -t UTF-8 -c "$file" > tmp
    mv -f tmp "$file"
}

function getdir(){
    for element in `ls $1`
    do
        dir_or_file=$1"/"$element
        echo $dir_or_file
        if [ -d $dir_or_file ]
        then
            getdir $dir_or_file
        else
            gbk2utf $dir_or_file
        fi
    done
}
getdir $1
